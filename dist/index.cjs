const e=require(`./chunk-350yNsax.cjs`),t=require(`./github-DVJV4Ju6.cjs`),n=require(`./message_builder-BgkDNl0x.cjs`);require(`./validate-BcD2lTbX.cjs`);const r=require(`./rules.cjs`);let i=require(`fs`),a=require(`os`);a=e.n(a),require(`@actions/http-client`);let o=require(`undici`),s=require(`@octokit/plugin-rest-endpoint-methods`),c=require(`@octokit/plugin-paginate-rest`);require(`@actions/http-client/lib/auth`),require(`@actions/exec`);let l=require(`@octokit/auth-action`);function u(e){return e==null?``:typeof e==`string`||e instanceof String?e:JSON.stringify(e)}function d(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}function f(e,t,n){let r=new p(e,t,n);process.stdout.write(r.toString()+a.EOL)}var p=class{constructor(e,t,n){e||=`missing.command`,this.command=e,this.properties=t,this.message=n}toString(){let e=`::`+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=` `;let t=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let r=this.properties[n];r&&(t?t=!1:e+=`,`,e+=`${n}=${h(r)}`)}}return e+=`::${m(this.message)}`,e}};function m(e){return u(e).replace(/%/g,`%25`).replace(/\r/g,`%0D`).replace(/\n/g,`%0A`)}function h(e){return u(e).replace(/%/g,`%25`).replace(/\r/g,`%0D`).replace(/\n/g,`%0A`).replace(/:/g,`%3A`).replace(/,/g,`%2C`)}var g=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};const{access:_,appendFile:v,writeFile:y}=i.promises,b=`GITHUB_STEP_SUMMARY`;new class{constructor(){this._buffer=``}filePath(){return g(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[b];if(!e)throw Error(`Unable to find environment variable for $${b}. Check if your runtime environment supports job summaries.`);try{yield _(e,i.constants.R_OK|i.constants.W_OK)}catch{throw Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,t,n={}){let r=Object.entries(n).map(([e,t])=>` ${e}="${t}"`).join(``);return t?`<${e}${r}>${t}</${e}>`:`<${e}${r}>`}write(e){return g(this,void 0,void 0,function*(){let t=!!e?.overwrite,n=yield this.filePath();return yield(t?y:v)(n,this._buffer,{encoding:`utf8`}),this.emptyBuffer()})}clear(){return g(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer=``,this}addRaw(e,t=!1){return this._buffer+=e,t?this.addEOL():this}addEOL(){return this.addRaw(a.EOL)}addCodeBlock(e,t){let n=Object.assign({},t&&{lang:t}),r=this.wrap(`pre`,this.wrap(`code`,e),n);return this.addRaw(r).addEOL()}addList(e,t=!1){let n=t?`ol`:`ul`,r=e.map(e=>this.wrap(`li`,e)).join(``),i=this.wrap(n,r);return this.addRaw(i).addEOL()}addTable(e){let t=e.map(e=>{let t=e.map(e=>{if(typeof e==`string`)return this.wrap(`td`,e);let{header:t,data:n,colspan:r,rowspan:i}=e,a=t?`th`:`td`,o=Object.assign(Object.assign({},r&&{colspan:r}),i&&{rowspan:i});return this.wrap(a,n,o)}).join(``);return this.wrap(`tr`,t)}).join(``),n=this.wrap(`table`,t);return this.addRaw(n).addEOL()}addDetails(e,t){let n=this.wrap(`details`,this.wrap(`summary`,e)+t);return this.addRaw(n).addEOL()}addImage(e,t,n){let{width:r,height:i}=n||{},a=Object.assign(Object.assign({},r&&{width:r}),i&&{height:i}),o=this.wrap(`img`,null,Object.assign({src:e,alt:t},a));return this.addRaw(o).addEOL()}addHeading(e,t){let n=`h${t}`,r=[`h1`,`h2`,`h3`,`h4`,`h5`,`h6`].includes(n)?n:`h1`,i=this.wrap(r,e);return this.addRaw(i).addEOL()}addSeparator(){let e=this.wrap(`hr`,null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap(`br`,null);return this.addRaw(e).addEOL()}addQuote(e,t){let n=Object.assign({},t&&{cite:t}),r=this.wrap(`blockquote`,e,n);return this.addRaw(r).addEOL()}addLink(e,t){let n=this.wrap(`a`,e,{href:t});return this.addRaw(n).addEOL()}},a.default.platform(),a.default.arch();var x;(function(e){e[e.Success=0]=`Success`,e[e.Failure=1]=`Failure`})(x||={});function S(e){process.exitCode=x.Failure,C(e)}function C(e,t={}){f(`error`,d(t),e instanceof Error?e.toString():e)}var w={authStrategy:l.createActionAuth,baseUrl:O(),userAgent:`octokit-action.js/0.0.0-development`};function T(){let e=process.env.HTTP_PROXY||process.env.http_proxy;if(e)return new o.ProxyAgent(e);let t=process.env.HTTPS_PROXY||process.env.https_proxy;if(t)return new o.ProxyAgent(t)}var E=async function(e,t){return await(0,o.fetch)(e,{dispatcher:T(),...t})},D=t.a.plugin(c.paginateRest,s.legacyRestEndpointMethods).defaults(function(e){return{...w,...e,request:{fetch:E,...e.request}}});function O(){return process.env.GITHUB_API_URL||`https://api.github.com`}async function k(){try{let e=t.i,i=new D,a=await t.n(i),o=e.issue.number,s=await t.t(i),c=[];process.env.INPUT_ADDITIONAL_RULES&&(c=r.parseRules(process.env.INPUT_ADDITIONAL_RULES)),await t.r(i,o,a,new n.t(`# :tada: Happy commit!
{{#messages}}- {{&.}}
{{/messages}}`,{},c).build({commitIds:s,prNum:o}))}catch(e){e instanceof Error?S(`Unexpected error: ${e.message}`):S(`Unexpected error: ${e}`)}}require.main===module&&k().then();
//# sourceMappingURL=index.cjs.map