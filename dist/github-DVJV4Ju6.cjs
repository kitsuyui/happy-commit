const e=require(`./chunk-350yNsax.cjs`);let t=require(`fs`),n=require(`os`),r=require(`@actions/http-client`);r=e.n(r);let i=require(`undici`),a=require(`universal-user-agent`),o=require(`before-after-hook`);o=e.n(o);let s=require(`@octokit/request`),c=require(`@octokit/graphql`),l=require(`@octokit/auth-token`),u=require(`@octokit/plugin-rest-endpoint-methods`),d=require(`@octokit/plugin-paginate-rest`);var f=class{constructor(){if(this.payload={},process.env.GITHUB_EVENT_PATH)if((0,t.existsSync)(process.env.GITHUB_EVENT_PATH))this.payload=JSON.parse((0,t.readFileSync)(process.env.GITHUB_EVENT_PATH,{encoding:`utf8`}));else{let e=process.env.GITHUB_EVENT_PATH;process.stdout.write(`GITHUB_EVENT_PATH ${e} does not exist${n.EOL}`)}this.eventName=process.env.GITHUB_EVENT_NAME,this.sha=process.env.GITHUB_SHA,this.ref=process.env.GITHUB_REF,this.workflow=process.env.GITHUB_WORKFLOW,this.action=process.env.GITHUB_ACTION,this.actor=process.env.GITHUB_ACTOR,this.job=process.env.GITHUB_JOB,this.runAttempt=parseInt(process.env.GITHUB_RUN_ATTEMPT,10),this.runNumber=parseInt(process.env.GITHUB_RUN_NUMBER,10),this.runId=parseInt(process.env.GITHUB_RUN_ID,10),this.apiUrl=process.env.GITHUB_API_URL??`https://api.github.com`,this.serverUrl=process.env.GITHUB_SERVER_URL??`https://github.com`,this.graphqlUrl=process.env.GITHUB_GRAPHQL_URL??`https://api.github.com/graphql`}get issue(){let e=this.payload;return Object.assign(Object.assign({},this.repo),{number:(e.issue||e.pull_request||e).number})}get repo(){if(process.env.GITHUB_REPOSITORY){let[e,t]=process.env.GITHUB_REPOSITORY.split(`/`);return{owner:e,repo:t}}if(this.payload.repository)return{owner:this.payload.repository.owner.login,repo:this.payload.repository.name};throw Error(`context.repo requires a GITHUB_REPOSITORY environment variable like 'owner/repo'`)}},p=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};function m(e){return new r.HttpClient().getAgent(e)}function h(e){return new r.HttpClient().getAgentDispatcher(e)}function g(e){let t=h(e);return(e,n)=>p(this,void 0,void 0,function*(){return(0,i.fetch)(e,Object.assign(Object.assign({},n),{dispatcher:t}))})}function _(){return process.env.GITHUB_API_URL||`https://api.github.com`}const v=`7.0.6`,y=()=>{},b=console.warn.bind(console),x=console.error.bind(console);function S(e={}){return typeof e.debug!=`function`&&(e.debug=y),typeof e.info!=`function`&&(e.info=y),typeof e.warn!=`function`&&(e.warn=b),typeof e.error!=`function`&&(e.error=x),e}const C=`octokit-core.js/${v} ${(0,a.getUserAgent)()}`;var w=class{static VERSION=v;static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){let t=this.plugins;return class extends this{static plugins=t.concat(e.filter(e=>!t.includes(e)))}}constructor(e={}){let t=new o.default.Collection,n={baseUrl:s.request.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${C}`:C,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=s.request.defaults(n),this.graphql=(0,c.withCustomRequest)(this.request).defaults(n),this.log=S(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=(0,l.createTokenAuth)(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}request;graphql;log;hook;auth};new f;const T=_(),E={baseUrl:T,request:{agent:m(T),fetch:g(T)}};w.plugin(u.restEndpointMethods,d.paginateRest).defaults(E);const D=new f;async function O(e,t,n,r){let i=D,a=await k(e,t,n),{lucky:o,body:s}=r;o?a&&a.body!==s?await e.issues.updateComment({...i.repo,comment_id:a.id,body:s}):await e.issues.createComment({...i.repo,issue_number:t,body:s}):a&&await e.issues.deleteComment({...i.repo,comment_id:a.id})}async function k(e,t,n){let r=D,i=await e.issues.listComments({...r.repo,issue_number:t});for(let e of i.data)if(e.user?.login===n)return{id:e.id,body:e.body_text||``};return null}async function A(e){let t=D;return(await e.pulls.listCommits({...t.repo,pull_number:t.issue.number})).data.map(e=>e.sha)}async function j(e){return(await e.graphql(`
query {
  viewer {
    login
  }
}`)).viewer.login}Object.defineProperty(exports,`a`,{enumerable:!0,get:function(){return w}}),Object.defineProperty(exports,`i`,{enumerable:!0,get:function(){return D}}),Object.defineProperty(exports,`n`,{enumerable:!0,get:function(){return j}}),Object.defineProperty(exports,`r`,{enumerable:!0,get:function(){return O}}),Object.defineProperty(exports,`t`,{enumerable:!0,get:function(){return A}});
//# sourceMappingURL=github-DVJV4Ju6.cjs.map