import{i as e,n as t,r as n,t as r}from"./chunk-DM4wYaYk.mjs";var i=r((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Context=void 0;let t=n(`fs`),r=n(`os`);e.Context=class{constructor(){if(this.payload={},process.env.GITHUB_EVENT_PATH)if((0,t.existsSync)(process.env.GITHUB_EVENT_PATH))this.payload=JSON.parse((0,t.readFileSync)(process.env.GITHUB_EVENT_PATH,{encoding:`utf8`}));else{let e=process.env.GITHUB_EVENT_PATH;process.stdout.write(`GITHUB_EVENT_PATH ${e} does not exist${r.EOL}`)}this.eventName=process.env.GITHUB_EVENT_NAME,this.sha=process.env.GITHUB_SHA,this.ref=process.env.GITHUB_REF,this.workflow=process.env.GITHUB_WORKFLOW,this.action=process.env.GITHUB_ACTION,this.actor=process.env.GITHUB_ACTOR,this.job=process.env.GITHUB_JOB,this.runAttempt=parseInt(process.env.GITHUB_RUN_ATTEMPT,10),this.runNumber=parseInt(process.env.GITHUB_RUN_NUMBER,10),this.runId=parseInt(process.env.GITHUB_RUN_ID,10),this.apiUrl=process.env.GITHUB_API_URL??`https://api.github.com`,this.serverUrl=process.env.GITHUB_SERVER_URL??`https://github.com`,this.graphqlUrl=process.env.GITHUB_GRAPHQL_URL??`https://api.github.com/graphql`}get issue(){let e=this.payload;return Object.assign(Object.assign({},this.repo),{number:(e.issue||e.pull_request||e).number})}get repo(){if(process.env.GITHUB_REPOSITORY){let[e,t]=process.env.GITHUB_REPOSITORY.split(`/`);return{owner:e,repo:t}}if(this.payload.repository)return{owner:this.payload.repository.owner.login,repo:this.payload.repository.name};throw Error(`context.repo requires a GITHUB_REPOSITORY environment variable like 'owner/repo'`)}}})),a=r((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),i=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a=e(n),o=0;o<a.length;o++)a[o]!==`default`&&t(i,n,a[o]);return r(i,n),i}})(),a=e&&e.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(e,`__esModule`,{value:!0}),e.getAuthString=c,e.getProxyAgent=l,e.getProxyAgentDispatcher=u,e.getProxyFetch=d,e.getApiBaseUrl=f;let o=i(n(`@actions/http-client`)),s=n(`undici`);function c(e,t){if(!e&&!t.auth)throw Error(`Parameter token or opts.auth is required`);if(e&&t.auth)throw Error(`Parameters token and opts.auth may not both be specified`);return typeof t.auth==`string`?t.auth:`token ${e}`}function l(e){return new o.HttpClient().getAgent(e)}function u(e){return new o.HttpClient().getAgentDispatcher(e)}function d(e){let t=u(e);return(e,n)=>a(this,void 0,void 0,function*(){return(0,s.fetch)(e,Object.assign(Object.assign({},n),{dispatcher:t}))})}function f(){return process.env.GITHUB_API_URL||`https://api.github.com`}})),o=r(((e,t)=>{var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s=(e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})},c=(e,t,n,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let c of a(t))!o.call(e,c)&&c!==n&&r(e,c,{get:()=>t[c],enumerable:!(s=i(t,c))||s.enumerable});return e},l=e=>c(r({},`__esModule`,{value:!0}),e),u={};s(u,{Octokit:()=>S}),t.exports=l(u);var d=n(`universal-user-agent`),f=n(`before-after-hook`),p=n(`@octokit/request`),m=n(`@octokit/graphql`),h=n(`@octokit/auth-token`),g=`5.2.2`,_=()=>{},v=console.warn.bind(console),y=console.error.bind(console);function b(e={}){return typeof e.debug!=`function`&&(e.debug=_),typeof e.info!=`function`&&(e.info=_),typeof e.warn!=`function`&&(e.warn=v),typeof e.error!=`function`&&(e.error=y),e}var x=`octokit-core.js/${g} ${(0,d.getUserAgent)()}`,S=class{static{this.VERSION=g}static defaults(e){return class extends this{constructor(...t){let n=t[0]||{};if(typeof e==`function`){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static{this.plugins=[]}static plugin(...e){let t=this.plugins;return class extends this{static{this.plugins=t.concat(e.filter(e=>!t.includes(e)))}}}constructor(e={}){let t=new f.Collection,n={baseUrl:p.request.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,`request`)}),mediaType:{previews:[],format:``}};if(n.headers[`user-agent`]=e.userAgent?`${e.userAgent} ${x}`:x,e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers[`time-zone`]=e.timeZone),this.request=p.request.defaults(n),this.graphql=(0,m.withCustomRequest)(this.request).defaults(n),this.log=b(e.log),this.hook=t,e.authStrategy){let{authStrategy:n,...r}=e,i=n(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},e.auth));t.wrap(`request`,i.hook),this.auth=i}else if(!e.auth)this.auth=async()=>({type:`unauthenticated`});else{let n=(0,h.createTokenAuth)(e.auth);t.wrap(`request`,n.hook),this.auth=n}let r=this.constructor;for(let t=0;t<r.plugins.length;++t)Object.assign(this,r.plugins[t](this,e))}}})),s=r((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),r=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),s=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a=e(n),o=0;o<a.length;o++)a[o]!==`default`&&t(i,n,a[o]);return r(i,n),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.GitHub=e.defaults=e.context=void 0,e.getOctokitOptions=m;let c=s(i()),l=s(a()),u=o(),d=n(`@octokit/plugin-rest-endpoint-methods`),f=n(`@octokit/plugin-paginate-rest`);e.context=new c.Context;let p=l.getApiBaseUrl();e.defaults={baseUrl:p,request:{agent:l.getProxyAgent(p),fetch:l.getProxyFetch(p)}},e.GitHub=u.Octokit.plugin(d.restEndpointMethods,f.paginateRest).defaults(e.defaults);function m(e,t){let n=Object.assign({},t||{}),r=l.getAuthString(e,n);return r&&(n.auth=r),n}})),c=r((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.context=void 0,e.getOctokit=c;let a=r(i()),o=s();e.context=new a.Context;function c(e,t,...n){return new(o.GitHub.plugin(...n))((0,o.getOctokitOptions)(e,t))}}));async function l(e,t,n,r){let i=p.context,a=await u(e,t,n),{lucky:o,body:s}=r;o?a&&a.body!==s?await e.issues.updateComment({...i.repo,comment_id:a.id,body:s}):await e.issues.createComment({...i.repo,issue_number:t,body:s}):a&&await e.issues.deleteComment({...i.repo,comment_id:a.id})}async function u(e,t,n){let r=p.context,i=await e.issues.listComments({...r.repo,issue_number:t});for(let e of i.data)if(e.user?.login===n)return{id:e.id,body:e.body_text||``};return null}async function d(e){let t=p.context;return(await e.pulls.listCommits({...t.repo,pull_number:t.issue.number})).data.map(e=>e.sha)}async function f(e){return(await e.graphql(`
query {
  viewer {
    login
  }
}`)).viewer.login}var p,m=t((()=>{p=e(c())}));export{c as a,l as i,f as n,m as r,d as t};
//# sourceMappingURL=github-DASL7Niu.mjs.map