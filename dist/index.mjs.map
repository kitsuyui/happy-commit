{"version":3,"file":"index.mjs","names":["os","__awaiter","__awaiter","__awaiter","undiciFetch","Core","context","github.context"],"sources":["../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/utils.js","../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/command.js","../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/oidc-utils.js","../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/summary.js","../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/platform.js","../node_modules/.pnpm/@actions+core@3.0.0/node_modules/@actions/core/lib/core.js","../node_modules/.pnpm/@octokit+action@8.0.4/node_modules/@octokit/action/dist-bundle/index.js","../src/index.ts"],"sourcesContent":["// We use any as a valid input type\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Sanitizes an input into a string so it can be passed into issueCommand safely\n * @param input input to sanitize into a string\n */\nexport function toCommandValue(input) {\n    if (input === null || input === undefined) {\n        return '';\n    }\n    else if (typeof input === 'string' || input instanceof String) {\n        return input;\n    }\n    return JSON.stringify(input);\n}\n/**\n *\n * @param annotationProperties\n * @returns The command properties to send with the actual annotation command\n * See IssueCommandProperties: https://github.com/actions/runner/blob/main/src/Runner.Worker/ActionCommandManager.cs#L646\n */\nexport function toCommandProperties(annotationProperties) {\n    if (!Object.keys(annotationProperties).length) {\n        return {};\n    }\n    return {\n        title: annotationProperties.title,\n        file: annotationProperties.file,\n        line: annotationProperties.startLine,\n        endLine: annotationProperties.endLine,\n        col: annotationProperties.startColumn,\n        endColumn: annotationProperties.endColumn\n    };\n}\n//# sourceMappingURL=utils.js.map","import * as os from 'os';\nimport { toCommandValue } from './utils.js';\n/**\n * Issues a command to the GitHub Actions runner\n *\n * @param command - The command name to issue\n * @param properties - Additional properties for the command (key-value pairs)\n * @param message - The message to include with the command\n * @remarks\n * This function outputs a specially formatted string to stdout that the Actions\n * runner interprets as a command. These commands can control workflow behavior,\n * set outputs, create annotations, mask values, and more.\n *\n * Command Format:\n *   ::name key=value,key=value::message\n *\n * @example\n * ```typescript\n * // Issue a warning annotation\n * issueCommand('warning', {}, 'This is a warning message');\n * // Output: ::warning::This is a warning message\n *\n * // Set an environment variable\n * issueCommand('set-env', { name: 'MY_VAR' }, 'some value');\n * // Output: ::set-env name=MY_VAR::some value\n *\n * // Add a secret mask\n * issueCommand('add-mask', {}, 'secretValue123');\n * // Output: ::add-mask::secretValue123\n * ```\n *\n * @internal\n * This is an internal utility function that powers the public API functions\n * such as setSecret, warning, error, and exportVariable.\n */\nexport function issueCommand(command, properties, message) {\n    const cmd = new Command(command, properties, message);\n    process.stdout.write(cmd.toString() + os.EOL);\n}\nexport function issue(name, message = '') {\n    issueCommand(name, {}, message);\n}\nconst CMD_STRING = '::';\nclass Command {\n    constructor(command, properties, message) {\n        if (!command) {\n            command = 'missing.command';\n        }\n        this.command = command;\n        this.properties = properties;\n        this.message = message;\n    }\n    toString() {\n        let cmdStr = CMD_STRING + this.command;\n        if (this.properties && Object.keys(this.properties).length > 0) {\n            cmdStr += ' ';\n            let first = true;\n            for (const key in this.properties) {\n                if (this.properties.hasOwnProperty(key)) {\n                    const val = this.properties[key];\n                    if (val) {\n                        if (first) {\n                            first = false;\n                        }\n                        else {\n                            cmdStr += ',';\n                        }\n                        cmdStr += `${key}=${escapeProperty(val)}`;\n                    }\n                }\n            }\n        }\n        cmdStr += `${CMD_STRING}${escapeData(this.message)}`;\n        return cmdStr;\n    }\n}\nfunction escapeData(s) {\n    return toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A');\n}\nfunction escapeProperty(s) {\n    return toCommandValue(s)\n        .replace(/%/g, '%25')\n        .replace(/\\r/g, '%0D')\n        .replace(/\\n/g, '%0A')\n        .replace(/:/g, '%3A')\n        .replace(/,/g, '%2C');\n}\n//# sourceMappingURL=command.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { HttpClient } from '@actions/http-client';\nimport { BearerCredentialHandler } from '@actions/http-client/lib/auth';\nimport { debug, setSecret } from './core.js';\nexport class OidcClient {\n    static createHttpClient(allowRetry = true, maxRetry = 10) {\n        const requestOptions = {\n            allowRetries: allowRetry,\n            maxRetries: maxRetry\n        };\n        return new HttpClient('actions/oidc-client', [new BearerCredentialHandler(OidcClient.getRequestToken())], requestOptions);\n    }\n    static getRequestToken() {\n        const token = process.env['ACTIONS_ID_TOKEN_REQUEST_TOKEN'];\n        if (!token) {\n            throw new Error('Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable');\n        }\n        return token;\n    }\n    static getIDTokenUrl() {\n        const runtimeUrl = process.env['ACTIONS_ID_TOKEN_REQUEST_URL'];\n        if (!runtimeUrl) {\n            throw new Error('Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable');\n        }\n        return runtimeUrl;\n    }\n    static getCall(id_token_url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const httpclient = OidcClient.createHttpClient();\n            const res = yield httpclient\n                .getJson(id_token_url)\n                .catch(error => {\n                throw new Error(`Failed to get ID Token. \\n \n        Error Code : ${error.statusCode}\\n \n        Error Message: ${error.message}`);\n            });\n            const id_token = (_a = res.result) === null || _a === void 0 ? void 0 : _a.value;\n            if (!id_token) {\n                throw new Error('Response json body do not have ID Token field');\n            }\n            return id_token;\n        });\n    }\n    static getIDToken(audience) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                // New ID Token is requested from action service\n                let id_token_url = OidcClient.getIDTokenUrl();\n                if (audience) {\n                    const encodedAudience = encodeURIComponent(audience);\n                    id_token_url = `${id_token_url}&audience=${encodedAudience}`;\n                }\n                debug(`ID token url is ${id_token_url}`);\n                const id_token = yield OidcClient.getCall(id_token_url);\n                setSecret(id_token);\n                return id_token;\n            }\n            catch (error) {\n                throw new Error(`Error message: ${error.message}`);\n            }\n        });\n    }\n}\n//# sourceMappingURL=oidc-utils.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { EOL } from 'os';\nimport { constants, promises } from 'fs';\nconst { access, appendFile, writeFile } = promises;\nexport const SUMMARY_ENV_VAR = 'GITHUB_STEP_SUMMARY';\nexport const SUMMARY_DOCS_URL = 'https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary';\nclass Summary {\n    constructor() {\n        this._buffer = '';\n    }\n    /**\n     * Finds the summary file path from the environment, rejects if env var is not found or file does not exist\n     * Also checks r/w permissions.\n     *\n     * @returns step summary file path\n     */\n    filePath() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._filePath) {\n                return this._filePath;\n            }\n            const pathFromEnv = process.env[SUMMARY_ENV_VAR];\n            if (!pathFromEnv) {\n                throw new Error(`Unable to find environment variable for $${SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);\n            }\n            try {\n                yield access(pathFromEnv, constants.R_OK | constants.W_OK);\n            }\n            catch (_a) {\n                throw new Error(`Unable to access summary file: '${pathFromEnv}'. Check if the file has correct read/write permissions.`);\n            }\n            this._filePath = pathFromEnv;\n            return this._filePath;\n        });\n    }\n    /**\n     * Wraps content in an HTML tag, adding any HTML attributes\n     *\n     * @param {string} tag HTML tag to wrap\n     * @param {string | null} content content within the tag\n     * @param {[attribute: string]: string} attrs key-value list of HTML attributes to add\n     *\n     * @returns {string} content wrapped in HTML element\n     */\n    wrap(tag, content, attrs = {}) {\n        const htmlAttrs = Object.entries(attrs)\n            .map(([key, value]) => ` ${key}=\"${value}\"`)\n            .join('');\n        if (!content) {\n            return `<${tag}${htmlAttrs}>`;\n        }\n        return `<${tag}${htmlAttrs}>${content}</${tag}>`;\n    }\n    /**\n     * Writes text in the buffer to the summary buffer file and empties buffer. Will append by default.\n     *\n     * @param {SummaryWriteOptions} [options] (optional) options for write operation\n     *\n     * @returns {Promise<Summary>} summary instance\n     */\n    write(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const overwrite = !!(options === null || options === void 0 ? void 0 : options.overwrite);\n            const filePath = yield this.filePath();\n            const writeFunc = overwrite ? writeFile : appendFile;\n            yield writeFunc(filePath, this._buffer, { encoding: 'utf8' });\n            return this.emptyBuffer();\n        });\n    }\n    /**\n     * Clears the summary buffer and wipes the summary file\n     *\n     * @returns {Summary} summary instance\n     */\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.emptyBuffer().write({ overwrite: true });\n        });\n    }\n    /**\n     * Returns the current summary buffer as a string\n     *\n     * @returns {string} string of summary buffer\n     */\n    stringify() {\n        return this._buffer;\n    }\n    /**\n     * If the summary buffer is empty\n     *\n     * @returns {boolen} true if the buffer is empty\n     */\n    isEmptyBuffer() {\n        return this._buffer.length === 0;\n    }\n    /**\n     * Resets the summary buffer without writing to summary file\n     *\n     * @returns {Summary} summary instance\n     */\n    emptyBuffer() {\n        this._buffer = '';\n        return this;\n    }\n    /**\n     * Adds raw text to the summary buffer\n     *\n     * @param {string} text content to add\n     * @param {boolean} [addEOL=false] (optional) append an EOL to the raw text (default: false)\n     *\n     * @returns {Summary} summary instance\n     */\n    addRaw(text, addEOL = false) {\n        this._buffer += text;\n        return addEOL ? this.addEOL() : this;\n    }\n    /**\n     * Adds the operating system-specific end-of-line marker to the buffer\n     *\n     * @returns {Summary} summary instance\n     */\n    addEOL() {\n        return this.addRaw(EOL);\n    }\n    /**\n     * Adds an HTML codeblock to the summary buffer\n     *\n     * @param {string} code content to render within fenced code block\n     * @param {string} lang (optional) language to syntax highlight code\n     *\n     * @returns {Summary} summary instance\n     */\n    addCodeBlock(code, lang) {\n        const attrs = Object.assign({}, (lang && { lang }));\n        const element = this.wrap('pre', this.wrap('code', code), attrs);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML list to the summary buffer\n     *\n     * @param {string[]} items list of items to render\n     * @param {boolean} [ordered=false] (optional) if the rendered list should be ordered or not (default: false)\n     *\n     * @returns {Summary} summary instance\n     */\n    addList(items, ordered = false) {\n        const tag = ordered ? 'ol' : 'ul';\n        const listItems = items.map(item => this.wrap('li', item)).join('');\n        const element = this.wrap(tag, listItems);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML table to the summary buffer\n     *\n     * @param {SummaryTableCell[]} rows table rows\n     *\n     * @returns {Summary} summary instance\n     */\n    addTable(rows) {\n        const tableBody = rows\n            .map(row => {\n            const cells = row\n                .map(cell => {\n                if (typeof cell === 'string') {\n                    return this.wrap('td', cell);\n                }\n                const { header, data, colspan, rowspan } = cell;\n                const tag = header ? 'th' : 'td';\n                const attrs = Object.assign(Object.assign({}, (colspan && { colspan })), (rowspan && { rowspan }));\n                return this.wrap(tag, data, attrs);\n            })\n                .join('');\n            return this.wrap('tr', cells);\n        })\n            .join('');\n        const element = this.wrap('table', tableBody);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds a collapsable HTML details element to the summary buffer\n     *\n     * @param {string} label text for the closed state\n     * @param {string} content collapsable content\n     *\n     * @returns {Summary} summary instance\n     */\n    addDetails(label, content) {\n        const element = this.wrap('details', this.wrap('summary', label) + content);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML image tag to the summary buffer\n     *\n     * @param {string} src path to the image you to embed\n     * @param {string} alt text description of the image\n     * @param {SummaryImageOptions} options (optional) addition image attributes\n     *\n     * @returns {Summary} summary instance\n     */\n    addImage(src, alt, options) {\n        const { width, height } = options || {};\n        const attrs = Object.assign(Object.assign({}, (width && { width })), (height && { height }));\n        const element = this.wrap('img', null, Object.assign({ src, alt }, attrs));\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML section heading element\n     *\n     * @param {string} text heading text\n     * @param {number | string} [level=1] (optional) the heading level, default: 1\n     *\n     * @returns {Summary} summary instance\n     */\n    addHeading(text, level) {\n        const tag = `h${level}`;\n        const allowedTag = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(tag)\n            ? tag\n            : 'h1';\n        const element = this.wrap(allowedTag, text);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML thematic break (<hr>) to the summary buffer\n     *\n     * @returns {Summary} summary instance\n     */\n    addSeparator() {\n        const element = this.wrap('hr', null);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML line break (<br>) to the summary buffer\n     *\n     * @returns {Summary} summary instance\n     */\n    addBreak() {\n        const element = this.wrap('br', null);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML blockquote to the summary buffer\n     *\n     * @param {string} text quote text\n     * @param {string} cite (optional) citation url\n     *\n     * @returns {Summary} summary instance\n     */\n    addQuote(text, cite) {\n        const attrs = Object.assign({}, (cite && { cite }));\n        const element = this.wrap('blockquote', text, attrs);\n        return this.addRaw(element).addEOL();\n    }\n    /**\n     * Adds an HTML anchor tag to the summary buffer\n     *\n     * @param {string} text link text/content\n     * @param {string} href hyperlink\n     *\n     * @returns {Summary} summary instance\n     */\n    addLink(text, href) {\n        const element = this.wrap('a', text, { href });\n        return this.addRaw(element).addEOL();\n    }\n}\nconst _summary = new Summary();\n/**\n * @deprecated use `core.summary`\n */\nexport const markdownSummary = _summary;\nexport const summary = _summary;\n//# sourceMappingURL=summary.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport os from 'os';\nimport * as exec from '@actions/exec';\nconst getWindowsInfo = () => __awaiter(void 0, void 0, void 0, function* () {\n    const { stdout: version } = yield exec.getExecOutput('powershell -command \"(Get-CimInstance -ClassName Win32_OperatingSystem).Version\"', undefined, {\n        silent: true\n    });\n    const { stdout: name } = yield exec.getExecOutput('powershell -command \"(Get-CimInstance -ClassName Win32_OperatingSystem).Caption\"', undefined, {\n        silent: true\n    });\n    return {\n        name: name.trim(),\n        version: version.trim()\n    };\n});\nconst getMacOsInfo = () => __awaiter(void 0, void 0, void 0, function* () {\n    var _a, _b, _c, _d;\n    const { stdout } = yield exec.getExecOutput('sw_vers', undefined, {\n        silent: true\n    });\n    const version = (_b = (_a = stdout.match(/ProductVersion:\\s*(.+)/)) === null || _a === void 0 ? void 0 : _a[1]) !== null && _b !== void 0 ? _b : '';\n    const name = (_d = (_c = stdout.match(/ProductName:\\s*(.+)/)) === null || _c === void 0 ? void 0 : _c[1]) !== null && _d !== void 0 ? _d : '';\n    return {\n        name,\n        version\n    };\n});\nconst getLinuxInfo = () => __awaiter(void 0, void 0, void 0, function* () {\n    const { stdout } = yield exec.getExecOutput('lsb_release', ['-i', '-r', '-s'], {\n        silent: true\n    });\n    const [name, version] = stdout.trim().split('\\n');\n    return {\n        name,\n        version\n    };\n});\nexport const platform = os.platform();\nexport const arch = os.arch();\nexport const isWindows = platform === 'win32';\nexport const isMacOS = platform === 'darwin';\nexport const isLinux = platform === 'linux';\nexport function getDetails() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return Object.assign(Object.assign({}, (yield (isWindows\n            ? getWindowsInfo()\n            : isMacOS\n                ? getMacOsInfo()\n                : getLinuxInfo()))), { platform,\n            arch,\n            isWindows,\n            isMacOS,\n            isLinux });\n    });\n}\n//# sourceMappingURL=platform.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { issue, issueCommand } from './command.js';\nimport { issueFileCommand, prepareKeyValueMessage } from './file-command.js';\nimport { toCommandProperties, toCommandValue } from './utils.js';\nimport * as os from 'os';\nimport * as path from 'path';\nimport { OidcClient } from './oidc-utils.js';\n/**\n * The code to exit an action\n */\nexport var ExitCode;\n(function (ExitCode) {\n    /**\n     * A code indicating that the action was successful\n     */\n    ExitCode[ExitCode[\"Success\"] = 0] = \"Success\";\n    /**\n     * A code indicating that the action was a failure\n     */\n    ExitCode[ExitCode[\"Failure\"] = 1] = \"Failure\";\n})(ExitCode || (ExitCode = {}));\n//-----------------------------------------------------------------------\n// Variables\n//-----------------------------------------------------------------------\n/**\n * Sets env variable for this action and future actions in the job\n * @param name the name of the variable to set\n * @param val the value of the variable. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function exportVariable(name, val) {\n    const convertedVal = toCommandValue(val);\n    process.env[name] = convertedVal;\n    const filePath = process.env['GITHUB_ENV'] || '';\n    if (filePath) {\n        return issueFileCommand('ENV', prepareKeyValueMessage(name, val));\n    }\n    issueCommand('set-env', { name }, convertedVal);\n}\n/**\n * Registers a secret which will get masked from logs\n *\n * @param secret - Value of the secret to be masked\n * @remarks\n * This function instructs the Actions runner to mask the specified value in any\n * logs produced during the workflow run. Once registered, the secret value will\n * be replaced with asterisks (***) whenever it appears in console output, logs,\n * or error messages.\n *\n * This is useful for protecting sensitive information such as:\n * - API keys\n * - Access tokens\n * - Authentication credentials\n * - URL parameters containing signatures (SAS tokens)\n *\n * Note that masking only affects future logs; any previous appearances of the\n * secret in logs before calling this function will remain unmasked.\n *\n * @example\n * ```typescript\n * // Register an API token as a secret\n * const apiToken = \"abc123xyz456\";\n * setSecret(apiToken);\n *\n * // Now any logs containing this value will show *** instead\n * console.log(`Using token: ${apiToken}`); // Outputs: \"Using token: ***\"\n * ```\n */\nexport function setSecret(secret) {\n    issueCommand('add-mask', {}, secret);\n}\n/**\n * Prepends inputPath to the PATH (for this action and future actions)\n * @param inputPath\n */\nexport function addPath(inputPath) {\n    const filePath = process.env['GITHUB_PATH'] || '';\n    if (filePath) {\n        issueFileCommand('PATH', inputPath);\n    }\n    else {\n        issueCommand('add-path', {}, inputPath);\n    }\n    process.env['PATH'] = `${inputPath}${path.delimiter}${process.env['PATH']}`;\n}\n/**\n * Gets the value of an input.\n * Unless trimWhitespace is set to false in InputOptions, the value is also trimmed.\n * Returns an empty string if the value is not defined.\n *\n * @param     name     name of the input to get\n * @param     options  optional. See InputOptions.\n * @returns   string\n */\nexport function getInput(name, options) {\n    const val = process.env[`INPUT_${name.replace(/ /g, '_').toUpperCase()}`] || '';\n    if (options && options.required && !val) {\n        throw new Error(`Input required and not supplied: ${name}`);\n    }\n    if (options && options.trimWhitespace === false) {\n        return val;\n    }\n    return val.trim();\n}\n/**\n * Gets the values of an multiline input.  Each value is also trimmed.\n *\n * @param     name     name of the input to get\n * @param     options  optional. See InputOptions.\n * @returns   string[]\n *\n */\nexport function getMultilineInput(name, options) {\n    const inputs = getInput(name, options)\n        .split('\\n')\n        .filter(x => x !== '');\n    if (options && options.trimWhitespace === false) {\n        return inputs;\n    }\n    return inputs.map(input => input.trim());\n}\n/**\n * Gets the input value of the boolean type in the YAML 1.2 \"core schema\" specification.\n * Support boolean input list: `true | True | TRUE | false | False | FALSE` .\n * The return value is also in boolean type.\n * ref: https://yaml.org/spec/1.2/spec.html#id2804923\n *\n * @param     name     name of the input to get\n * @param     options  optional. See InputOptions.\n * @returns   boolean\n */\nexport function getBooleanInput(name, options) {\n    const trueValue = ['true', 'True', 'TRUE'];\n    const falseValue = ['false', 'False', 'FALSE'];\n    const val = getInput(name, options);\n    if (trueValue.includes(val))\n        return true;\n    if (falseValue.includes(val))\n        return false;\n    throw new TypeError(`Input does not meet YAML 1.2 \"Core Schema\" specification: ${name}\\n` +\n        `Support boolean input list: \\`true | True | TRUE | false | False | FALSE\\``);\n}\n/**\n * Sets the value of an output.\n *\n * @param     name     name of the output to set\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function setOutput(name, value) {\n    const filePath = process.env['GITHUB_OUTPUT'] || '';\n    if (filePath) {\n        return issueFileCommand('OUTPUT', prepareKeyValueMessage(name, value));\n    }\n    process.stdout.write(os.EOL);\n    issueCommand('set-output', { name }, toCommandValue(value));\n}\n/**\n * Enables or disables the echoing of commands into stdout for the rest of the step.\n * Echoing is disabled by default if ACTIONS_STEP_DEBUG is not set.\n *\n */\nexport function setCommandEcho(enabled) {\n    issue('echo', enabled ? 'on' : 'off');\n}\n//-----------------------------------------------------------------------\n// Results\n//-----------------------------------------------------------------------\n/**\n * Sets the action status to failed.\n * When the action exits it will be with an exit code of 1\n * @param message add error issue message\n */\nexport function setFailed(message) {\n    process.exitCode = ExitCode.Failure;\n    error(message);\n}\n//-----------------------------------------------------------------------\n// Logging Commands\n//-----------------------------------------------------------------------\n/**\n * Gets whether Actions Step Debug is on or not\n */\nexport function isDebug() {\n    return process.env['RUNNER_DEBUG'] === '1';\n}\n/**\n * Writes debug message to user log\n * @param message debug message\n */\nexport function debug(message) {\n    issueCommand('debug', {}, message);\n}\n/**\n * Adds an error issue\n * @param message error issue message. Errors will be converted to string via toString()\n * @param properties optional properties to add to the annotation.\n */\nexport function error(message, properties = {}) {\n    issueCommand('error', toCommandProperties(properties), message instanceof Error ? message.toString() : message);\n}\n/**\n * Adds a warning issue\n * @param message warning issue message. Errors will be converted to string via toString()\n * @param properties optional properties to add to the annotation.\n */\nexport function warning(message, properties = {}) {\n    issueCommand('warning', toCommandProperties(properties), message instanceof Error ? message.toString() : message);\n}\n/**\n * Adds a notice issue\n * @param message notice issue message. Errors will be converted to string via toString()\n * @param properties optional properties to add to the annotation.\n */\nexport function notice(message, properties = {}) {\n    issueCommand('notice', toCommandProperties(properties), message instanceof Error ? message.toString() : message);\n}\n/**\n * Writes info to log with console.log.\n * @param message info message\n */\nexport function info(message) {\n    process.stdout.write(message + os.EOL);\n}\n/**\n * Begin an output group.\n *\n * Output until the next `groupEnd` will be foldable in this group\n *\n * @param name The name of the output group\n */\nexport function startGroup(name) {\n    issue('group', name);\n}\n/**\n * End an output group.\n */\nexport function endGroup() {\n    issue('endgroup');\n}\n/**\n * Wrap an asynchronous function call in a group.\n *\n * Returns the same type as the function itself.\n *\n * @param name The name of the group\n * @param fn The function to wrap in the group\n */\nexport function group(name, fn) {\n    return __awaiter(this, void 0, void 0, function* () {\n        startGroup(name);\n        let result;\n        try {\n            result = yield fn();\n        }\n        finally {\n            endGroup();\n        }\n        return result;\n    });\n}\n//-----------------------------------------------------------------------\n// Wrapper action state\n//-----------------------------------------------------------------------\n/**\n * Saves state for current action, the state can only be retrieved by this action's post job execution.\n *\n * @param     name     name of the state to store\n * @param     value    value to store. Non-string values will be converted to a string via JSON.stringify\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function saveState(name, value) {\n    const filePath = process.env['GITHUB_STATE'] || '';\n    if (filePath) {\n        return issueFileCommand('STATE', prepareKeyValueMessage(name, value));\n    }\n    issueCommand('save-state', { name }, toCommandValue(value));\n}\n/**\n * Gets the value of an state set by this action's main execution.\n *\n * @param     name     name of the state to get\n * @returns   string\n */\nexport function getState(name) {\n    return process.env[`STATE_${name}`] || '';\n}\nexport function getIDToken(aud) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return yield OidcClient.getIDToken(aud);\n    });\n}\n/**\n * Summary exports\n */\nexport { summary } from './summary.js';\n/**\n * @deprecated use core.summary\n */\nexport { markdownSummary } from './summary.js';\n/**\n * Path exports\n */\nexport { toPosixPath, toWin32Path, toPlatformPath } from './path-utils.js';\n/**\n * Platform utilities exports\n */\nexport * as platform from './platform.js';\n//# sourceMappingURL=core.js.map","// pkg/dist-src/index.js\nimport { Octokit as Core } from \"@octokit/core\";\nimport { createActionAuth } from \"@octokit/auth-action\";\nimport {\n  paginateRest\n} from \"@octokit/plugin-paginate-rest\";\nimport { legacyRestEndpointMethods } from \"@octokit/plugin-rest-endpoint-methods\";\nimport { fetch as undiciFetch, ProxyAgent } from \"undici\";\n\n// pkg/dist-src/version.js\nvar VERSION = \"0.0.0-development\";\n\n// pkg/dist-src/index.js\nvar DEFAULTS = {\n  authStrategy: createActionAuth,\n  baseUrl: getApiBaseUrl(),\n  userAgent: `octokit-action.js/${VERSION}`\n};\nfunction getProxyAgent() {\n  const httpProxy = process.env[\"HTTP_PROXY\"] || process.env[\"http_proxy\"];\n  if (httpProxy) {\n    return new ProxyAgent(httpProxy);\n  }\n  const httpsProxy = process.env[\"HTTPS_PROXY\"] || process.env[\"https_proxy\"];\n  if (httpsProxy) {\n    return new ProxyAgent(httpsProxy);\n  }\n  return void 0;\n}\nvar customFetch = async function(url, opts) {\n  return await undiciFetch(url, {\n    dispatcher: getProxyAgent(),\n    ...opts\n  });\n};\nvar Octokit = Core.plugin(paginateRest, legacyRestEndpointMethods).defaults(\n  function buildDefaults(options) {\n    return {\n      ...DEFAULTS,\n      ...options,\n      request: {\n        fetch: customFetch,\n        ...options.request\n      }\n    };\n  }\n);\nfunction getApiBaseUrl() {\n  return process.env[\"GITHUB_API_URL\"] || \"https://api.github.com\";\n}\nexport {\n  Octokit,\n  customFetch,\n  getProxyAgent\n};\n/* v8 ignore next -- @preserve */\n","import * as core from '@actions/core'\nimport * as github from '@actions/github'\nimport { Octokit } from '@octokit/action'\n\nimport { getCommitIds, getUserLogin, updateMessage } from './github'\nimport type { MessageForRule } from './interfaces'\nimport { CustomMessageBuilder } from './message_builder'\nimport { parseRules } from './rules'\n\nasync function run() {\n  try {\n    const context = github.context\n    const octokit = new Octokit()\n    const userLogin = await getUserLogin(octokit)\n    const prNum = context.issue.number\n    const commitIds = await getCommitIds(octokit)\n    let additionalRules: MessageForRule[] = []\n    if (process.env.INPUT_ADDITIONAL_RULES) {\n      additionalRules = parseRules(process.env.INPUT_ADDITIONAL_RULES)\n    }\n    const mb = new CustomMessageBuilder(\n      '# :tada: Happy commit!\\n{{#messages}}- {{&.}}\\n{{/messages}}',\n      {},\n      additionalRules\n    )\n    const message = mb.build({ commitIds, prNum })\n    await updateMessage(octokit, prNum, userLogin, message)\n  } catch (error) {\n    if (error instanceof Error) {\n      core.setFailed(`Unexpected error: ${error.message}`)\n    } else {\n      core.setFailed(`Unexpected error: ${error}`)\n    }\n  }\n}\n\nif (require.main === module) {\n  run().then()\n}\n"],"x_google_ignoreList":[0,1,2,3,4,5,6],"mappings":"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"}